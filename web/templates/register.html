<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register Page</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE6zO5W5CKXV0uMPhJ3O6"
          crossorigin="anonymous"> 
    <link rel="stylesheet" href="/static/style.css">  
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="text-center mb-4">
                <h1 class="h3 mb-3 font-weight-normal">Register</h1>
            </div>
            <form action="/register_done" method="post" class="login-form" id="register-form">
                <div class="form-group">
                    <label for="username" class="form-label">Username</label>
                    <input type="text" name="username" id="username" placeholder="Enter Username" class="form-input" required autofocus autocomplete = "off">
                </div>
                <div class="form-group">
                    <label for="password" class="form-label">Password</label>
                    <input type="password" name="password" id="password" placeholder="Enter Password" class="form-input" required autocomplete = "off">
                </div>
                <div class="form-group">
                    <label for="confirm_password" class="form-label">Confirm Password</label>
                    <input type="password" name="confirm_password" placeholder="Confirm Password" id="confirm_password" class="form-input"
                           required autocomplete = "off">
                    <span id="password-match-error" style="color:red; font-size: 80%;"></span>
                </div>
                <div class="form-group">
                    <button class="form-button" type="submit" id="register-button" disabled>Register</button>
                </div>
            </form>
        </div>
    </div>
    <script>
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirm_password');
        const registerButton = document.getElementById('register-button');
        const registerForm = document.getElementById('register-form');
        const passwordMatchError = document.getElementById('password-match-error');
        confirmPasswordInput.addEventListener('input', () => {
            if (confirmPasswordInput.value !== passwordInput.value) {
                confirmPasswordInput.setCustomValidity('Passwords do not match');
                registerButton.disabled = true;
                passwordMatchError.textContent = "Passwords do not match";
            } else {
                confirmPasswordInput.setCustomValidity('');
                registerButton.disabled = false;
                passwordMatchError.textContent = "";
            }
        });
        registerForm.addEventListener('submit', (event) => {
            if (confirmPasswordInput.value !== passwordInput.value) {
                event.preventDefault();
                passwordMatchError.textContent = "Passwords do not match";
            }
        });
    </script>
</body>
</html>
